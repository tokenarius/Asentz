// /pages/api/og.tsx

import { ImageResponse } from '@vercel/og'
import { NextRequest } from 'next/server'

export const config = {
  runtime: 'experimental-edge',
}

export default async function handler(req: NextRequest) {
  const { searchParams } = req.nextUrl
  const tvl = searchParams.get('tvl')
  const volume = searchParams.get('volume')
  const fee = searchParams.get('fee')
  return new ImageResponse(
    (
      <div
        style={{
          display: 'flex',
          position: 'relative',
          fontSize: 40,
          color: 'black',
          background: 'white',
          width: '100%',
          height: '100%',
          textAlign: 'center',
          justifyContent: 'center',
          alignItems: 'center',
        }}
      >
        <svg width={1200} height={630} viewBox="0 0 1200 630" fill="none" xmlns="http://www.w3.org/2000/svg">
          <div
            style={{
              whiteSpace: 'pre',
              fontFamily: 'Lufga',
              fontSize: 80,
              fontWeight: 500,
              position: 'absolute',
              top: 178,
              left: 94,
              letterSpacing: '0em',
              color: 'white',
              //   zIndex: 100,
            }}
          >
            Sushi Analytics
          </div>
          <div style={{ display: 'flex', flexDirection: 'row' }}>
            <div style={{ display: 'flex', flexDirection: 'column' }}>
              <div
                style={{
                  position: 'absolute',
                  whiteSpace: 'pre',
                  fontFamily: 'Lufga',
                  fontSize: 36,
                  fontWeight: 400,
                  top: 330,
                  left: 94,
                  letterSpacing: '0em',
                  color: '#97A3B7',
                }}
              >
                TVL
              </div>
              <div
                style={{
                  position: 'absolute',
                  whiteSpace: 'pre',
                  fontFamily: 'Lufga',
                  fontSize: 48,
                  fontWeight: 500,
                  top: 389,
                  left: 94,
                  letterSpacing: '0em',
                  color: 'white',
                }}
              >
                {/* $9.8B */}
                {tvl}
              </div>
            </div>
            <div style={{ display: 'flex', flexDirection: 'column' }}>
              <div
                style={{
                  position: 'absolute',
                  whiteSpace: 'pre',
                  fontFamily: 'Lufga',
                  fontSize: 36,
                  fontWeight: 400,
                  top: 330,
                  left: 359,
                  letterSpacing: '0em',
                  color: '#97A3B7',
                }}
              >
                VOLUME (24H)
              </div>
              <div
                style={{
                  position: 'absolute',
                  whiteSpace: 'pre',
                  fontFamily: 'Lufga',
                  fontSize: 48,
                  fontWeight: 500,
                  top: 389,
                  left: 359,
                  letterSpacing: '0em',
                  color: 'white',
                }}
              >
                {/* $100M */}
                {volume}
              </div>
            </div>
            <div style={{ display: 'flex', flexDirection: 'column' }}>
              <div
                style={{
                  position: 'absolute',
                  whiteSpace: 'pre',
                  fontFamily: 'Lufga',
                  fontSize: 36,
                  fontWeight: 400,
                  top: 330,
                  left: 749,
                  letterSpacing: '0em',
                  color: '#97A3B7',
                }}
              >
                FEE (24H)
              </div>
              <div
                style={{
                  position: 'absolute',
                  whiteSpace: 'pre',
                  fontFamily: 'Lufga',
                  fontSize: 48,
                  fontWeight: 500,
                  top: 389,
                  left: 749,
                  letterSpacing: '0em',
                  color: 'white',
                }}
              >
                {/* $1K */}
                {fee}
              </div>
            </div>
          </div>
          <g clipPath="url(#a)">
            <path fill="#081123" d="M0 0h1200v630H0z" />
            <path fill="url(#b)" fillOpacity={0.2} d="M0 0h1200v630H0z" />
            <g opacity={0.6}>
              <ellipse cx={949.86} cy={93.234} rx={140.898} ry={141.234} fill="#EF348B" />
              <ellipse cx={949.86} cy={93.234} rx={140.898} ry={141.234} fill="url(#c)" />
            </g>
            <path
              d="m920.514 227.286 86.826-86.824c-15.416 8.808-29.73 19.347-42.68 31.301l-12.845 12.845c-11.954 12.95-22.493 27.264-31.301 42.678Zm-25.9 68.998 181.726-181.722c-5.04.996-9.97 2.202-14.89 3.513L898.127 281.393c-1.311 4.929-2.517 9.857-3.513 14.891ZM890 342.474v1.468L1123.99 110h-1.46c-3.41 0-6.77.105-10.07.21L890.262 332.407c-.157 3.356-.262 6.711-.262 10.067Zm3.618 40.999 269.852-269.856a210 210 0 0 0-9.8-1.52L892.097 373.669c.42 3.251.944 6.554 1.521 9.804Zm8.808 34.238 295.284-295.285c-2.83-.996-5.71-1.887-8.6-2.726L899.699 409.113c.892 2.883 1.783 5.767 2.727 8.598Zm12.845 30.252 312.749-312.744a347.76 347.76 0 0 0-7.66-3.722L911.549 440.308c1.205 2.569 2.411 5.138 3.722 7.655Zm16.149 26.948 323.54-323.544a194.633 194.633 0 0 0-6.81-4.561l-321.292 321.29a192.065 192.065 0 0 0 4.562 6.815Zm19.084 24.012 328.416-328.42c-1.99-1.783-3.98-3.565-6.03-5.295L945.209 492.894a538.945 538.945 0 0 0 5.295 6.029Zm21.968 21.131L1300.11 192.42c-1.73-2.045-3.52-4.09-5.3-6.082l-328.42 328.42c1.993 1.783 3.985 3.566 6.082 5.296Zm24.747 18.298L1318.4 217.167a174.27 174.27 0 0 0-4.56-6.816L990.403 533.843c2.255 1.521 4.509 3.041 6.816 4.509Zm27.841 15.256 308.55-308.55c-1.21-2.569-2.41-5.138-3.72-7.655l-312.54 312.534c2.57 1.259 5.14 2.465 7.71 3.671Zm31.3 11.798 289.1-289.098c-.84-2.884-1.78-5.768-2.73-8.599l-294.97 294.97c2.83.997 5.72 1.888 8.6 2.727Zm35.55 7.55 261.1-261.1c-.42-3.303-.95-6.607-1.52-9.857l-269.44 269.437c3.25.576 6.55 1.101 9.86 1.52Zm30.62 2.045c3.61 0 7.18-.105 10.69-.262l221.52-221.516c.16-3.565.26-7.13.26-10.696v-.891l-233.37 233.365c.27-.052.58 0 .9 0Zm61.86-8.39 162.27-162.27c1.37-4.928 2.57-9.909 3.62-14.943l-180.83 180.831a237.971 237.971 0 0 0 14.94-3.618Z"
              fill="#3B7EF6"
              fillOpacity={0.4}
            />
            <g clipPath="url(#d)">
              <path
                d="M1030.46 569.406c-2.28 0-4.56-.424-6.85-1.271-2.29-.848-4.23-1.966-5.82-3.356l3.73-5.586a15.83 15.83 0 0 0 4.28 2.668c1.62.667 3.16 1.001 4.62 1.001 1.21 0 2.23-.223 3.06-.667.84-.445 1.27-1.036 1.27-1.772 0-.264-.06-.5-.17-.709-.11-.208-.3-.403-.56-.583a5.215 5.215 0 0 0-.79-.459c-.26-.139-.64-.285-1.13-.437a18.31 18.31 0 0 0-1.27-.355c-.34-.097-.85-.229-1.51-.396-6.9-1.695-10.35-4.898-10.35-9.608 0-2.709 1.06-4.877 3.17-6.503 2.11-1.639 4.9-2.459 8.36-2.459 2.17 0 4.17.333 6.01 1 1.84.667 3.35 1.543 4.51 2.626l-3.36 5.607c-.88-.806-1.98-1.452-3.29-1.938a10.997 10.997 0 0 0-3.95-.751c-1.16 0-2.11.202-2.84.605-.73.403-1.09.924-1.09 1.563 0 .681.42 1.243 1.28 1.688.87.445 2.06.848 3.58 1.209.51.111.98.229 1.41.354.44.111 1.05.306 1.82.584.79.264 1.49.556 2.11.875.64.32 1.31.737 2.03 1.251.72.514 1.31 1.07 1.78 1.667.48.598.88 1.32 1.2 2.168.33.847.5 1.75.5 2.709 0 1.807-.52 3.425-1.56 4.856-1.03 1.418-2.44 2.508-4.22 3.273-1.78.764-3.77 1.146-5.96 1.146Zm32.17-2.522c-1.89 1.681-4.4 2.522-7.52 2.522-3.11 0-5.62-.841-7.51-2.522-1.89-1.695-2.84-3.932-2.84-6.711v-13.047h6.88v12.067c0 1.056.31 1.904.95 2.543.65.639 1.49.959 2.52.959 1.04 0 1.87-.32 2.51-.959.65-.639.97-1.487.97-2.543v-12.067h6.87v13.047c0 2.779-.94 5.016-2.83 6.711Zm14.74 2.522c-3.47 0-6.6-1.084-9.4-3.251l3.04-4.356c2 1.514 4.05 2.272 6.15 2.272.91 0 1.64-.126 2.19-.376.56-.264.83-.625.83-1.083 0-.473-.29-.834-.87-1.084-.56-.25-1.45-.5-2.65-.751-.63-.138-1.14-.25-1.53-.333-.37-.097-.87-.25-1.51-.459-.63-.208-1.15-.416-1.55-.625-.39-.222-.83-.514-1.33-.875-.48-.361-.86-.75-1.14-1.167a7.215 7.215 0 0 1-.68-1.543 6.709 6.709 0 0 1-.29-2.001c0-1.556.42-2.883 1.26-3.98.85-1.098 1.95-1.904 3.32-2.418 1.36-.514 2.91-.771 4.63-.771 3.19 0 6.12.938 8.78 2.813l-3.06 4.356c-1.95-1.222-3.77-1.834-5.47-1.834-.77 0-1.41.105-1.9.313-.49.208-.73.528-.73.959 0 .458.28.813.83 1.063.55.236 1.44.479 2.65.729.59.111 1.1.216 1.51.313.42.097.93.243 1.53.438.61.194 1.12.402 1.54.625.42.222.87.514 1.34.875.47.348.85.737 1.14 1.167.29.431.52.952.7 1.563.2.598.29 1.258.29 1.98 0 2.349-.9 4.176-2.71 5.482-1.79 1.306-4.1 1.959-6.91 1.959Zm25.75-22.801c2.44 0 4.41.743 5.9 2.23 1.5 1.487 2.25 3.46 2.25 5.919v14.131h-6.87v-11.817c0-1.14-.32-2.05-.97-2.731-.65-.695-1.51-1.042-2.59-1.042-1.19 0-2.15.354-2.88 1.063-.71.709-1.07 1.64-1.07 2.793v11.734h-6.85v-30.742h6.85v11.025c1.65-1.709 3.73-2.563 6.23-2.563Zm15.75-1.834c-1.19 0-2.18-.396-2.98-1.188-.8-.806-1.2-1.807-1.2-3.002 0-1.222.4-2.23 1.2-3.022.8-.806 1.79-1.209 2.98-1.209 1.22 0 2.22.403 3 1.209.8.792 1.2 1.8 1.2 3.022 0 1.195-.4 2.196-1.2 3.002-.78.792-1.78 1.188-3 1.188Zm-3.41 24.114v-21.759h6.85v21.759h-6.85Z"
                fill="#fff"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="m1009.08 560-8.78 12.283c-1.279 1.791-3.773 2.579-6.949 2.324-4.413-.384-10.275-2.73-15.881-6.76a44.363 44.363 0 0 1-5.166-4.292c-2.971-2.886-5.154-5.889-6.323-8.566-1.279-2.943-1.322-5.544-.043-7.335l8.803-12.283c1.28-1.791 3.752-2.58 6.95-2.324 4.412.363 10.253 2.73 15.88 6.738 5.609 4.031 9.719 8.828 11.469 12.88.15.348.28.69.4 1.028.87 2.518.77 4.727-.36 6.307Z"
                fill="url(#e)"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M1007.68 553.262c-1.69-3.86-5.63-8.402-11.004-12.24-5.35-3.838-10.914-6.12-15.113-6.461-2.558-.213-4.583.256-5.606 1.685l-.043.085c-.959 1.429-.746 3.454.256 5.757 1.684 3.881 5.627 8.423 10.978 12.261 5.35 3.838 10.914 6.12 15.112 6.461 2.52.192 4.5-.256 5.54-1.599l.07-.107c1.02-1.407.81-3.497-.19-5.842Zm-7.871.085c-.468.661-1.428.853-2.6.746-2.111-.17-4.882-1.322-7.567-3.241-2.686-1.919-4.669-4.179-5.5-6.12-.469-1.087-.597-2.046-.128-2.708.469-.661 1.429-.853 2.622-.767 2.089.192 4.881 1.322 7.546 3.241 2.686 1.919 4.668 4.2 5.5 6.141.488 1.087.618 2.047.127 2.708Z"
                fill="#fff"
              />
            </g>
          </g>
          <defs>
            <radialGradient
              id="b"
              cx={0}
              cy={0}
              r={1}
              gradientUnits="userSpaceOnUse"
              gradientTransform="matrix(0 315 -600 0 600 315)"
            >
              <stop stopOpacity={0} />
              <stop offset={1} />
            </radialGradient>
            <radialGradient
              id="c"
              cx={0}
              cy={0}
              r={1}
              gradientUnits="userSpaceOnUse"
              gradientTransform="matrix(0 249.85 -249.255 0 950.197 93.234)"
            >
              <stop offset={0.002} stopOpacity={0.6} />
              <stop offset={1} stopOpacity={0.45} />
            </radialGradient>
            <clipPath id="a">
              <path fill="#fff" d="M0 0h1200v630H0z" />
            </clipPath>
            <clipPath id="d">
              <path fill="#fff" transform="translate(965 533)" d="M0 0h158.073v42H0z" />
            </clipPath>
            <linearGradient id="e" x1={980.284} y1={532.497} x2={994.746} y2={575.158} gradientUnits="userSpaceOnUse">
              <stop stopColor="#27B0E6" />
              <stop offset={0.044} stopColor="#49A1DB" />
              <stop offset={0.118} stopColor="#7D8ACA" />
              <stop offset={0.216} stopColor="#A279BD" />
              <stop offset={0.296} stopColor="#BA6FB6" />
              <stop offset={0.375} stopColor="#C26BB3" />
              <stop offset={0.468} stopColor="#D563AD" />
              <stop offset={0.58} stopColor="#E65BA7" />
              <stop offset={0.709} stopColor="#F156A3" />
              <stop offset={0.823} stopColor="#F853A1" />
              <stop offset={1} stopColor="#FA52A0" />
            </linearGradient>
          </defs>
        </svg>
      </div>
    ),
    {
      width: 1200,
      height: 630,
    }
  )
}
